---
import type { CollectionEntry } from "astro:content";
import Layout from "./Layout.astro";
import { Image } from "astro:assets";
import ResponsiveImage from "../components/ResponsiveImage.astro";

type Props = CollectionEntry<"oppskrifter">["data"];

// has to be enabled for dynamic image resizing
//export const prerender = true;

const { title, tags, ingredienser, heroImage, tattFra } = Astro.props;
---

<Layout description={`Oppskrift for: ${title}`} tab_title={title}>
  <section class="prose prose-lg lg:prose-xl mx-auto py-4 px-2">
    {
      tattFra && (
        <p class="text-sm">
          Denne oppskriften er fra eller basert p√• denne:{" "}
          <span>
            <a href={tattFra}>{tattFra}</a>
          </span>
        </p>
      )
    }
    <slot />
  </section>
  <div class="flex flex-col gap-4 justify-center max-w-4xl">
    {
      heroImage &&
        heroImage.map((img) => (
          <ResponsiveImage
            src={img}
            sizes={[400, 700, 900]}
            alt="bildet av oppskriften"
            format="avif"
          />
        ))
    }
  </div>
</Layout>
